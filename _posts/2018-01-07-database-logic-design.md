---
layout: post
title: 数据库——逻辑设计
date: 2018-01-07
categories: blog
tags: [数据库,设计,逻辑设计]
description: 
---

整理于慕课网《数据库设计那些事》。  
上面我们说到数据库设计的四个步骤的第一步——需求分析。下面我们进入到第二个步骤：逻辑设计。

首先是众所周知的ER图。

# 1. ER图
## （1）逻辑设计是做什么的？
a将需求转化为数据库的逻辑模型  
b通过ER图的形式对逻辑模型进行展示  
c同所选用的具体的数据库管理系统无关

## （2）名词解释
关系：一个关系对应通常所说的一张表；  
元组：表中的一行即为一个元组。  
属性：表中的一列及为一个属性；每一个属性都有一个名称，成为属性名。  
候选码：表中的某个属性组，它可以唯一确定一个元组。  
主码：一个关系有多个候选码，选定其中一个为主码。  
域：属性的取值范围。  
分量：元组中的一个属性值。  

## （3）ER图例说明
矩形：表示实体集，矩形内些实体集的名字  
菱形：表示联系集，将原来多对对的关系转换为一对多的关系  
椭圆：表示实体的属性  
线段：将属性连接到实体集，或将实体集连接到联系集  

# 2. 数据库设计范式
## （1）数据操作异常及数据冗余
大量操作异常和数据冗余的表是不符合数据库设计范式。  

操作异常：  
插入异常：如果某实体随着另一个实体的存在而存在，即缺少某个实体时无法表示这个实体，那么这个表就存在插入异常。  
更新异常：如果更改表所对应的某个实体实例的单独属性时，需要将多行更新，那么就说这个表存在更新异常。  
删除异常：如果删除表的某一行来反映某实体实例失效时导致另一个不同实体实例信息丢失，那么这个表中就存在删除异常。

数据冗余：  
是指相同的数据在多个地方存在，或者说表中的某个列可以由其他列计算得到。  

## （2）第一范式（1NF）
定义：数据库中的所有字段都是单一属性，不可再分的。  
这个单一属性是有基本的数据类型所构成的，如整数，浮点数，字符串等。  
也就是说，第一范式要求数据库中的表都是二维表。

## （3）第二范式（2NF）
定义：数据库的表中不存在非关键字段对任一候选关键字段的部分函数依赖。  
**部分函数依赖**是指存在着组合关键字中的某一关键字决定非关键字的情况。  
也就是说，所有单关键字段的表都符合第二范式。  

（多关键字字段的某一字段和其他某一非关键字字段有必然的关系，例如：关键字1="aa" 则 非关键字3 必定是 "bbcc" , 关键字1="bb" 则 非关键字3 必定是 "addccasd" ）

对于不符合第二范式的表，可以进行拆分。拆分成若干实体后，还需要一张关系表。


