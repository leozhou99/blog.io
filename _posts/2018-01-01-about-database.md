---
layout: post
title: 数据库相关
date: 2018-01-01
categories: blog
tags: [数据库,设计]
description: 根据业务系统的具体要求，结合我们所选用的数据库管理系统，为这个业务系统构造出最优的数据存储模型，并建立好数据库中的表结构及表与表之间的关联关系
---

# 1. 数据库设计简介
建立数据库应用系统的设计看作检大厦的过程。大厦建立之前，要先设计、绘制图纸、按照图纸建设大厦。数据库相当于我们大厦的地基。

## （1）什么是数据库设计？
就是根据业务系统的具体要求，结合我们所选用的数据库管理系统，为这个业务系统构造出最优的数据存储模型，并建立好数据库中的表结构及表与表之间的关联关系的过程。使之能有效的对应用系统中的数据进行存储，并可以高效地对已经存储的数据进行访问。

## （2）常见的数据库管理系统：
MYSQL、ORACLE、SQLSERVER、PGSQL，还用目前一种NOSQL系统：mongo、memcache、redis。

## （3）为什么要进行数据库设计？
数据库系统是应用系统存储数据的关键组成部分，是系统稳定运行的基础，决定着系统是否可以高效地运行。

优良的设计：减少数据冗余，避免数据维护异常，节约空间，高效访问。

糟糕的设计：存在大量的数据冗余，存在数据插入、更新、删除异常，浪费大量存储空间，访问数据低效。

# 2.数据库设计的步骤：

(1)数据库设计的步骤:需求分析-〉逻辑设计-〉物理设计-〉维护优化
 
(2)数据库需求的作用点：数据是什么、数据有哪些属性、数据和属性各自的特点有哪些

(3)逻辑设计：使用ER图对数据库进行逻辑建模，之后就可以在大多数数据库管理系统中进行表的设计

(4)物理设计: 根据数据库自身的特点把逻辑设计转换为物理设计。

(5)维护设计：根据新的需求重新进行相关的逻辑设计、建表、索引优化、大表拆分等等

# 3.需求分析过程中需要了解的重要内容
**直接进行表设计导致设计出来的表不是最优化的，必须首先进行需求分析：**
  
（1）了解系统中所要存储的数据有哪些

（2）了解数据的存储特点：比如有些具有时效性，定期归档和清理。还有些数据增长很快，数据量也很大，但它不是系统的核心数据，可以采取分库、分表方式存储。比如日志定期归档和清理。

（3）了解数据的生命周期

**要搞清的一些问题：**

（1） 实体（对象）与实体之间的关系  实体与表的对应关系、实体与实体的对应关系 1对1，1对多，多对多。

（2）实体所包含的属性有什么？

（3）哪些属性或属性的组合可以唯一标识一个实体。

# 4.数据库设计实例演示
以一个小型的电子商务网站为例，在这个电子商务网站的系统中包含了几个核心模块：用户模块、商品模块、订单模块、购物车模块、供应商模块

（1） 实例演示--用户模块

    用于记录注册用户信息
    包括属性：用户名、密码、电话、邮箱、身份证号、地址、姓名、昵称……
    可选唯一标识属性：用户名、身份证、电话
    存储特点：随系统上线时间逐渐增加，需要永久存储。

（2）实例演示--商品模块

	用于记录网站中所销售的商品信息
	包括属性：商品编码、商品名称、商品描述、商品品类、供应商名称、重量、有效期、价格……
	可选唯一标识属性：（商品名称，供应商名称）、（商品编码）
	存储特点：对于下线商品可以归档存储

（3）实例演示--订单模块

	用于用户订购商品的信息
	包括属性：订单好、用户姓名、用户电话、收货地址、商品编号、商品名称、数量、订单状态、支付状态、订单类型……
	可选唯一标识属性：订单号 
	存储特点：永久存储（分表、分库存储）

（4）实例演示--购物车模块

	用于保存用户购物是选对的商品
	包括属性：用户名、商品编号、商品名称、商品价格、商品描述、商品分类，加入时间，商品数量
	可选唯一标识：（用户名、商品编号、加入时间）、（购物车编号）
	存储特点：不用永久存储（设置归档、清理规则）

（5）实例演示——供应商模块

	用于保存所销售商品的供应商信息
	包括属性：供应商上编号、供应商名称、联系人、电话、营业执照号、地址、法人……
	可选唯一标识：（供应商编号），（营业执照号）
	存储特点：永久存储

（6）实体间的关系

	订单和用户：一对多
	用户和购物车：一对多
	商品和购物车：多对多
	商品和订单：多对多
	商品和供应商：多对多







